<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="CAP_FIT.TicketManagement.Repository.TicketRepository">

  <select id="userList" resultType="CAP_FIT.TicketManagement.Data.User">
    SELECT * FROM gym_user
  </select>

  <select id="nominationTicketList" resultType="CAP_FIT.TicketManagement.Data.NominationTicket">
    SELECT * FROM nomination_ticket
  </select>

  <select id="stretchTicketList" resultType="CAP_FIT.TicketManagement.Data.StretchTicket">
    SELECT * FROM stretch_ticket
  </select>

  <select id="selectUserList" resultType="CAP_FIT.TicketManagement.Data.User">
    SELECT * FROM gym_user WHERE name = #{name}
  </select>

  <insert id="insertUser" parameterType="CAP_FIT.TicketManagement.Data.User">
   INSERT INTO gym_user (id, name, email_address, membership_fee, admission_day)
   VALUES (#{id}, #{name}, #{emailAddress}, #{membershipFee}, #{admissionDay});
  </insert>

  <insert id="insertNominationTicket" parameterType="CAP_FIT.TicketManagement.Data.NominationTicket" useGeneratedKeys="true" keyProperty="ticketNumber">
    INSERT INTO nomination_ticket (user_id, remaining, buy_day, user_name)
    VALUES (#{userId}, #{remaining}, #{buyDay}, #{userName});
  </insert>

  <insert id="insertStretchTicket" parameterType="CAP_FIT.TicketManagement.Data.StretchTicket" useGeneratedKeys="true" keyProperty="ticketNumber">
    INSERT INTO stretch_ticket (user_id, remaining, buy_day, user_name)
    VALUES (#{userId}, #{remaining}, #{buyDay}, #{userName});
  </insert>

  <update id="updateUser" parameterType="CAP_FIT.TicketManagement.Data.User">
    UPDATE gym_user
    SET name = #{name}, email_address = #{emailAddress}, membership_fee = #{membershipFee}, admission_day = #{admissionDay}
    WHERE id = #{id}
  </update>

  <update id="updateNominationTicket" parameterType="CAP_FIT.TicketManagement.Data.NominationTicket">
    UPDATE nomination_ticket
    SET remaining = #{remaining}, buy_day = #{buyDay}, user_name = #{userName}
    WHERE user_id = #{userId}
  </update>

</mapper>